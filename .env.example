UPBIT_WS_URL=wss://api.upbit.com/websocket/v1
SYMBOL=KRW-BTC

DECISION_INTERVAL_SEC=5
H_SEC=120
VOL_WINDOW_SEC=600

R_MIN=0.0010
K_VOL=1.0

MODE=paper

# WebSocket 옵션 (선택)
# UPBIT_WS_FORMAT=DEFAULT
# UPBIT_ORDERBOOK_UNIT=5
# UPBIT_PING_INTERVAL_SEC=20
# UPBIT_RECONNECT_MIN_SEC=1
# UPBIT_RECONNECT_MAX_SEC=30
# UPBIT_NO_MESSAGE_TIMEOUT_SEC=30

# Model v0 params
MODEL_LOOKBACK_SEC=120
FEE_RATE=0.0005
SLIPPAGE_BPS=2
EV_COST_MULT=1.0
P_NONE_MAX_FOR_SIGNAL=0.7

# v1: p_none(z) function parameter
# P_HIT_CZ=0.25

# v1: score coefficients (standardized inputs)
# SCORE_A_MOMZ=1.5
# SCORE_B_IMB=1.0
# SCORE_C_SPREAD=1.0

# Evaluator / Dashboard
# EVAL_WINDOW_N=500
# DASH_PRED_WINDOW_N=200

# Paper trading
# PAPER_TRADING_ENABLED=true
# PAPER_INITIAL_KRW=1000000
# MAX_POSITION_FRAC=0.20
# MIN_ORDER_KRW=5000
# EXIT_EV_RATE_TH=-0.00002
# DATA_LAG_SEC_MAX=5.0
# COST_RMIN_MULT=1.10

# v1: action_hat thresholds
# ENTER_EV_RATE_TH=0.0
# ENTER_PNONE_MAX=0.70
# ENTER_PDIR_MARGIN=0.05
# ENTER_SPREAD_BPS_MAX=20.0

DB_URL=postgresql+psycopg://postgres:postgres@db:5432/quant

# ── Upbit REST API (Step 7) ─────────────────────────────────────
# 실제 API 키는 .env에만 설정하고 절대 커밋하지 마세요.
# UPBIT_ACCESS_KEY=ShotFZmvEZvYsxen6ZdExCx87zpN4F5hsadvSxiT
# UPBIT_SECRET_KEY=udif4abThHAaowxqOtouhGPGhzOsSK5B3d10dLAV
# UPBIT_API_BASE=https://api.upbit.com
# UPBIT_ACCOUNT_POLL_SEC=30
# UPBIT_REST_TIMEOUT_SEC=10.0
# UPBIT_REST_MAX_RETRY=3

# Shadow / Live trading (기본값: shadow 모드, 실거래 비활성)
# UPBIT_SHADOW_ENABLED=true
# UPBIT_ORDER_TEST_ENABLED=false
# LIVE_TRADING_ENABLED=false
# UPBIT_TRADE_MODE=shadow
# LIVE_GUARD_PHRASE=

# ── Step 8: 주문 실행 파이프라인 v1 ─────────────────────────────────
# Live 모드 활성화 조건 (4가지 모두 true여야 live 주문 허용):
#   LIVE_TRADING_ENABLED=true
#   UPBIT_TRADE_MODE=live
#   LIVE_GUARD_PHRASE=I_CONFIRM_LIVE_TRADING
#   PAPER_POLICY_PROFILE != "test"
#
# Test 모드 (POST /v1/orders/test 호출, 실거래 없음):
#   UPBIT_ORDER_TEST_ENABLED=true  (API 키 필요)
#
# Live 주문 폴링 설정:
# LIVE_ORDER_POLL_INTERVAL_SEC=5
# LIVE_ORDER_MAX_POLLS=24
#
# Smoke test 실행: poetry run python -m app.exchange.smoke
# (키 없으면 종료코드 1, 키 있으면 get_accounts + orders/chance + order_test 확인)

# ── Step 10: E2E 검증 / Ready 상태 ──────────────────────────────────
# E2E 검증 실행: poetry run python -m app.exchange.e2e_test
#   - 키 없으면 SKIP (exit 0)
#   - 키 있으면 get_accounts → orders/chance → order_test 순서 호출
#   - 결과를 upbit_order_attempts에 mode=test, status=test_ok 로 기록
#
# order_test BUY 금액 (KRW, 최소 주문 이상이어야 함):
# UPBIT_E2E_TEST_ORDER_KRW=10000
#
# order_test SELL 수량 (BTC, 잔고 부족 시 skip):
# UPBIT_E2E_TEST_SELL_BTC=0.0001

# ── Step 11: paper_trades → Upbit TEST 자동 연동 ──────────────────────
# 아래 4개 설정을 모두 활성화하면 paper_trade 이벤트마다 /v1/orders/test 자동 호출:
# 주의: 실거래(LIVE) 설정은 별도 승인 없이 절대 활성화 금지
#
# UPBIT_TRADE_MODE=test                     # shadow | test (live는 별도 승인 필요)
# UPBIT_ORDER_TEST_ENABLED=true             # test 호출 활성화
# UPBIT_TEST_ON_PAPER_TRADES=true           # paper_trade 이벤트 시 자동 order_test
# PAPER_POLICY_PROFILE=test                 # 반드시 UPBIT_TEST_REQUIRE_PAPER_PROFILE 값과 일치
#
# BUY test 금액(KRW):
# UPBIT_TEST_BUY_KRW=10000
# SELL test 수량(BTC, 잔고 없을 때 fallback):
# UPBIT_TEST_SELL_BTC=0.0001
# PAPER_PROFILE과 TEST REQUIRE 일치 여부 확인용:
# UPBIT_TEST_REQUIRE_PAPER_PROFILE=test
#
# 자동 연동 상태 점검:
#   poetry run python -m app.exchange.paper_test_smoke --window 600

# ── Alt Data (Binance / Coinglass) ────────────────────────────────────────
# ALT_DATA_ENABLED=true
# ALT_SYMBOL_BINANCE=BTCUSDT
# ALT_SYMBOL_COINGLASS=BTC
#
# Binance Futures WS (키 불필요):
# BINANCE_FUTURES_WS_BASE=wss://fstream.binance.com/ws
# BINANCE_FUTURES_REST_BASE=https://fapi.binance.com
# BINANCE_MARK_PRICE_STREAM=!markPrice@arr@1s
# BINANCE_FORCE_ORDER_STREAM=!forceOrder@arr
# BINANCE_POLL_SEC=60
# BINANCE_METRIC_PERIOD=5m
#
# Coinglass (API Key 필요):
# COINGLASS_API_KEY=your_key_here
# COINGLASS_BASE=https://open-api.coinglass.com
# COINGLASS_POLL_SEC=300
